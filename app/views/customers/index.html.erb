<div class="table-card">
  <div class="table-toolbar">
    <div class="toolbar-left">
      <h1>Kunden</h1>
      <div class="density-toggle" data-controller="density">
        <button data-action="click->density#comfortable" class="is-active">Komfort</button>
        <button data-action="click->density#compact">Kompakt</button>
      </div>
    </div>
    <div class="toolbar-right">
      <%= link_to "Neuer Kunde", new_customer_path, class: "btn btn-primary" %>
    </div>
  </div>

  <% if @customers.any? %>
    <div class="table-wrapper">
      <table class="data-table is-comfortable">
        <thead>
        <tr>
          <th class="is-numeric">Nr</th>
          <th data-sortable>Naam</th>
          <th class="is-numeric">Gruppe</th>
          <th data-sortable>USt</th>
          <th data-sortable>Status</th>
          <th class="is-actions"></th>
        </tr>
        </thead>
        <tbody>
        <% @customers.each do |k| %>
          <tr>
            <td class="is-numeric"><%= k.kundennr %></td>
            <td class="truncate">
              <%= link_to k.name, k, class: "row-link" %>
            </td>
            <td class="is-numeric"><%= k.kundgruppe %></td>
            <td>
                <span class="status-badge <%= k.umsatzsteuer == 'J' ? 'success' : 'muted' %>">
                  <%= k.umsatzsteuer == 'J' ? 'mit USt' : 'ohne USt' %>
                </span>
            </td>
            <td>
                <span class="status-badge <%= k.aktiv? ? 'success' : 'warning' %>">
                  <%= k.aktiv? ? 'aktiv' : 'gekündigt' %>
                </span>
            </td>
            <td class="is-actions">
              <%= link_to "Bearbeiten", edit_customer_path(k), class: "btn btn-ghost" %>
              <%= link_to "Löschen", k, data: { turbo_method: :delete, turbo_confirm: "Wirklich löschen?" }, class: "btn btn-ghost danger" %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="empty-state">
      <div class="empty-illustration"></div>
      <h3>Keine Kunden gefunden</h3>
      <p>Lege den ersten Kunden an, um zu starten.</p>
      <%= link_to "Neuer Kunde", new_customer_path, class: "btn btn-primary" %>
    </div>
  <% end %>
</div>